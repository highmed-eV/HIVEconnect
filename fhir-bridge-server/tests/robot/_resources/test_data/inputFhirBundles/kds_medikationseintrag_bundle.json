{
    "resourceType": "Bundle",
    "id": "kds-medikationseintrag-bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "urn:uuid:70ca7d00-0d8b-42bb-9508-a8fc76e5c7ad",
            "resource": {
                "resourceType": "List",
                "id": "example-medication-list",
                "meta": {
                    "profile": [
                        "https://www.medizininformatik-initiative.de/fhir/core/modul-medikation/StructureDefinition/medikationsliste"
                    ]
                },
                "identifier": [
                    {
                        "use": "official",
                        "system": "urn:uuid:example-identifier",
                        "value": "medlist-001"
                    }
                ],
                "status": "current",
                "mode": "snapshot",
                "code": {
                    "coding": [
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/list-example-use-codes",
                            "code": "medications",
                            "display": "Medication list"
                        },
                        {
                            "system": "http://ihe-d.de/CodeSystems/FallkontextBeiDokumentenerstellung",
                            "code": "E210",
                            "display": "Admission"
                        }
                    ],
                    "text": "Medication list for admission"
                },
                "subject": {
                    "identifier": {
                        "system": "urn:ietf:rfc:4122",
                        "value": "4c7d0173-7378-42b2-a9fa-64cd2664674f"
                    }
                },
                "encounter": {
                    "reference": "Encounter/example-encounter",
                    "display": "Routine Checkup"
                },
                "date": "2024-08-22",
                "entry": [
                    {
                        "item": {
                            "reference": "MedicationRequest/example-medicationstatement",
                            "display": "Crocin 500mg tablet"
                        }
                    }
                ]
            },
            "request": {
                "method": "POST",
                "url": "List"
            }
        },
        {
            "fullUrl": "urn:uuid:example-medicationstatement",
            "resource": {
                "resourceType": "MedicationStatement",
                "id": "example-medicationstatement",
                "meta": {
                    "profile": [
                        "https://www.medizininformatik-initiative.de/fhir/core/modul-medikation/StructureDefinition/MedicationStatement"
                    ]
                },
                "status": "active",
                "medicationReference": {
                    "reference": "urn:uuid:med-crocin",
                    "display": "Crocin 500mg tablet"
                },
                "statusReason": [
                    {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "50621000087108",
                                "display": "Recommendation to restart drug treatment"
                            }
                        ],
                        "text": "Recommendation to restart drug treatment"
                    }
                ],
                "reasonCode": [
                    {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "13644009",
                                "display": "Hypercholesterolemia"
                            }
                        ],
                        "text": "High cholesterol"
                    }
                ],
                "subject": {
                    "identifier": {
                        "system": "urn:ietf:rfc:4122",
                        "value": "4c7d0173-7378-42b2-a9fa-64cd2664674f"
                    }
                },
                "effectiveDateTime": "2024-08-21",
                "dateAsserted": "2024-08-21",
                "informationSource": {
                    "reference": "Practitioner/example-practitioner"
                },
                "dosage": [
                    {
                        "text": "1 tablet daily",
                        "sequence": 1,
                        "timing": {
                            "repeat": {
                                "frequency": 2,
                                "period": 1,
                                "periodUnit": "d",
                                "when": ["AC"], 
                                "offset": 120,
                                "duration": 30,
                                "durationUnit": "d"
                            }
                        },
                        "route": {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/v3-RouteOfAdministration",
                                    "code": "PO",
                                    "display": "Swallow, oral"
                                }
                            ]
                        },
                        "asNeededBoolean": true,
                        "doseAndRate": [
                            {
                                "doseQuantity": {
                                    "value": 81,
                                    "unit": "mg",
                                    "system": "http://unitsofmeasure.org",
                                    "code": "mg"
                                }
                            }
                        ]
                        
                    }
                ],
                "note": [
                    {
                      "text": "Patient reports high temperature."
                    }
                ]
            },
            "request": {
                "method": "POST",
                "url": "MedicationStatement"
            }
        },
        {
            "fullUrl": "urn:uuid:med-crocin",
            "resource": {
                "resourceType": "Medication",
                "id": "med-crocin",
                "meta": {
                    "profile": [
                        "https://www.medizininformatik-initiative.de/fhir/core/modul-medikation/StructureDefinition/Medication"
                    ]
                },
                "code": {
                    "coding": [
                        {
                            "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                            "code": "2262278",
                            "display": "crocin"
                        }
                    ],
                    "text": "Crocin 500mg tablet"
                },
                "form": {
                    "coding": [
                        {
                            "system": "http://standardterms.edqm.eu",
                            "code": "10219000",
                            "display": "Tablet"
                        }
                    ]
                },
                "amount": {
                    "numerator": {
                        "value": 100,
                        "unit": "mg"
                    },
                    "denominator": {
                        "value": 1,
                        "unit": "tablet"
                    }
                },
                "ingredient": [
                    {
                        "itemReference": {
                           "reference": "Medication/active-ingredient-relationship"
                        },
                        "strength": {
                            "numerator": {
                                "value": 500,
                                "unit": "mg",
                                "system": "http://unitsofmeasure.org",
                                "code": "mg"
                            },
                            "denominator": {
                                "value": 1,
                                "unit": "tablet",
                                "system": "http://unitsofmeasure.org",
                                "code": "tablet"
                            }
                        },
                        "isActive": true
                    }
                ]
            },
            "request": {
                "method": "POST",
                "url": "Medication"
            }
        },
        {
            "fullUrl": "urn:uuid:active-ingredient-relationship",
            "resource": {
                "resourceType": "Medication",
                "id": "active-ingredient-relationship",
                "meta": {
                    "profile": [
                        "https://www.medizininformatik-initiative.de/fhir/core/modul-medikation/StructureDefinition/Medication"
                    ]
                },
                "code": {
                    "coding": [
                        {
                            "system": "http://www.whocc.no/atc",
                            "code": "N02BE01",
                            "display": "Paracetamol"
                        }
                    ],
                    "text": "Paracetamol oral ingredient" 
                },
                "amount": {
                    "numerator": {
                        "value": 100,
                        "unit": "mg"
                    },
                    "denominator": {
                        "value": 1,
                        "unit": "tablet"
                    }
                },
                "ingredient": [
                    {
                        "itemCodeableConcept": {
                            "coding": [
                                {
                                    "system": "http://www.whocc.no/atc",
                                    "code": "N02BE01",
                                    "display": "Paracetamol"
                                }
                            ],
                            "text": "Paracetamol oral"
                        },
                        "strength": {
                            "numerator": {
                                "value": 13,
                                "unit": "mg",
                                "system": "http://unitsofmeasure.org",
                                "code": "mg"
                            },
                            "denominator": {
                                "value": 1,
                                "unit": "tablet",
                                "system": "http://unitsofmeasure.org",
                                "code": "tablet"
                            }
                        }
                    }
                ],
                "manufacturer": {
                    "reference": "Organization/manufacturer-organization"
                },
                "batch": {
                    "lotNumber": "Batch 1",
                    "expirationDate": "2022-02-03T04:05:06Z"
                }
            },
            "request": {
                "method": "POST",
                "url": "Medication"
            }
        },        
        {
            "fullUrl": "urn:uuid:8ab73d0a-ae92-40a7-9c0b-73c6e5293aee",
            "resource": {
                "resourceType": "Encounter",
                "id": "example-encounter",
                "status": "finished",
                "meta": {
                    "profile": [
                        "https://www.medizininformatik-initiative.de/fhir/core/modul-fall/StructureDefinition/KontaktGesundheitseinrichtung"
                    ]
                },
                "class": {
                    "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
                    "code": "AMB",
                    "display": "ambulatory"
                },
                "type": [
                    {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "11429006",
                                "display": "Consultation"
                            }
                        ]
                    }
                ],
                "subject": {
                    "reference": "/Patient?identifier=urn:ietf:rfc:4122|07f602e0-579e-4fe3-95af-381728bf0d49",
                    "identifier": {
                        "system": "urn:ietf:rfc:4122",
                        "value": "07f602e0-579e-4fe3-95af-381728bf0d49"
                    }
                },
                "period": {
                    "start": "2024-08-21T09:00:00+01:00",
                    "end": "2024-08-21T09:30:00+01:00"
                },
                "extension": [
                    {
                        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Encounter.plannedStartDate",
                        "valueDateTime": "2024-08-21T09:00:00+01:00"
                    },
                    {
                        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Encounter.plannedEndDate",
                        "valueDateTime": "2024-08-21T09:30:00+01:00"
                    }
                ],
                "hospitalization": {
                    "admitSource": {
                        "coding": [
                            {
                                "system": "http://terminology.hl7.org/CodeSystem/admit-source",
                                "code": "emd",
                                "display": "From accident/emergency department"
                            }
                        ]
                    },
                    "dischargeDisposition": {
                        "coding": [
                            {
                                "system": "http://terminology.hl7.org/CodeSystem/discharge-disposition",
                                "code": "home",
                                "display": "Home"
                            }
                        ],
                        "text": "Discharged to home"
                    }
                },
                "location": [
                    {
                        "location": {
                            "reference": "Location/example"
                        }
                    }
                ],
                "serviceProvider": {
                    "reference": "Organization/5678"
                },
                "identifier": [
                    {
                        "use": "usual",
                        "type": {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                                    "code": "MR"
                                }
                            ]
                        },
                        "system": "http://hospital.smarthealthit.org",
                        "value": "12345"
                    }
                ],
                "serviceType": {
                    "coding": [
                        {
                            "system": "http://snomed.info/sct",
                            "code": "general-practice",
                            "display": "General practice (specialty) (qualifier value)"
                        }
                    ],
                    "text": "General medicine consultation"
                }
            },
            "request": {
                "method": "POST",
                "url": "Encounter"
            }
        },
        {
            "fullUrl": "urn:uuid:00000000-0000-0000-0000-000000000003",
            "request": {
                "method": "POST",
                "url": "Organization"
            },
            "resource": {
                "resourceType": "Organization",
                "id": "5678",
                "name": "Example Health Clinic",
                "identifier": [
                    {
                        "system": "http://hl7.org/fhir/identifier",
                        "value": "ORG-12345"
                    }
                ]
            }
        },
        {
            "fullUrl": "urn:uuid:00000000-0000-0000-0000-000000000007",
            "request": {
                "method": "POST",
                "url": "Organization"
            },
            "resource": {
                "resourceType": "Organization",
                "id": "manufacturer-organization",
                "name": "GSK (GlaxoSmithKline)",
                "identifier": [
                    {
                        "system": "http://hl7.org/fhir/identifier",
                        "value": "ORG-6789"
                    }
                ]
            }
        }
    ]
}